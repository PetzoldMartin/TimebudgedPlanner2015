<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:o="http://omnifaces.org/ui"
	template="/WEB-INF/templates/template.xhtml">
	<f:metadata>
		<f:viewParam name="eid" value="#{alteredEmployeeDTO.id}" />
	</f:metadata>
	<ui:define name="content">
		<c:set target="#{alteredEmployeeDTO}" property="firstName" value="#{employeeQuery.getEmployeeDetails(request.getParameter('eid')).firstName}"/>
		<c:set target="#{alteredEmployeeDTO}" property="lastName" value="#{employeeQuery.getEmployeeDetails(request.getParameter('eid')).lastName}"/>
		<o:form includeViewParams="true">
			<h:panelGrid columns="2" cellpadding="0" cellspacing="2">
				Mitarbeiter ID: #{request.getParameter('eid')} <br />
				Vorname: <h:inputText value="#{alteredEmployeeDTO.firstName}"/> <br />
				Nachname: <h:inputText value="#{alteredEmployeeDTO.lastName}"/> <br />
				<table>
					<tr>
						<th>Projekt</th>
						<th>Rollen</th>
					</tr>
					<ui:repeat var="v_project" value="#{employeeQuery.getEmployeeDetails(request.getParameter('eid')).projectRoleMap.keySet().toArray()}">
						<td>#{v_project}</td>
						<td>
							<ui:repeat var="v_role" value="#{employeeQuery.getEmployeeDetails(request.getParameter('eid')).projectRoleMap.get(v_project).toArray()}">
								#{v_role}
							</ui:repeat>
						</td>
					</ui:repeat>
				</table>
				<br />
				<h:commandButton value="Änderungen speichern" action="#{employeeCommand.alterEmployee(alteredEmployeeDTO)}"/>
				<h:commandButton value="Zurück" action="employee"/>
			</h:panelGrid>
		</o:form>
	</ui:define>
</ui:composition>
